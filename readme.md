# Solana Chain Framework | Terraform

Terraform configuration for an svm chain

## Prerequisites

- Terraform (latest version)
- AWS CLI configured with appropriate credentials
- SSH keygen utility

## Setup and Execution

1. **Clone and Navigate**
   Clone the repository and navigate to the project directory.

2. **Generate Keypairs**
   Run the setup script to generate necessary keypairs:
   ```
   ./scripts/keypairs.sh
   ```
   This script generates:
   - Bootstrap validator identity, vote account, and stake account keypairs
   - SSH key for accessing the bootstrap node

3. **Initialize Terraform**
   ```
   terraform init
   ```
   This command initializes the Terraform working directory, downloading necessary providers and modules.

4. **Plan Infrastructure Changes**
   ```
   terraform plan -var-file=environments/dev.tfvars -input=false
   ```
   This command creates an execution plan, showing you what actions Terraform will take to create your infrastructure. Review this output carefully.

5. **Apply Infrastructure Changes**
   ```
   terraform plan -var-file=environments/dev.tfvars -input=false
   ```
   This command executes the actions proposed in the Terraform plan. You'll be prompted to confirm the actions before proceeding.

6. **Access Output Information**
   After successful application, Terraform will display important information like IP addresses and resource IDs. Save this information for future reference.

7. **Destroy Infrastructure (When Needed)**
   ```
   terraform destroy
   ```
   Use this command to tear down all the resources created by Terraform when they're no longer needed.

8. **Format**
   ```
   terraform fmt -recursive
   ```
   Use this command to format tf files

## Important Notes

- The `keypairs.sh` script generates crucial keypairs. Ensure you securely store the generated files.
- Always review the `terraform plan` output before applying changes to understand the proposed modifications to your infrastructure.
- The Terraform configuration uses the keypair generated by `setup.sh`. If you modify key names or locations, update the Terraform files accordingly.
- Regularly update your Terraform configuration and provider versions to ensure you're using the latest features and security updates.

For troubleshooting or advanced configuration, refer to the individual Terraform files and the AWS provider documentation.